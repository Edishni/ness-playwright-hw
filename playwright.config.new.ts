import { defineConfig, devices } from '@playwright/test';\nimport * as path from 'path';\n\nexport default defineConfig({\n    testDir: 'src/tests',\n    testMatch: '**/*.spec.ts',\n    testIgnore: process.env.CI ? ['**/temp-tests/**'] : ['**/temp-tests/**'],\n    timeout: process.env.CI ? 10 * 60 * 1000 : 15 * 60 * 1000,\n    expect: { timeout: process.env.CI ? 15000 : 5000 },\n    \n    // Enhanced reporter configuration with Allure attachments\n    reporter: process.env.CI \n        ? [['github'], ['html'], ['allure-playwright', { \n            outputFolder: 'allure-results',\n            suiteTitle: false,\n            attachments: {\n                screenshot: 'always',\n                video: 'retain-on-failure',\n                trace: 'retain-on-failure'\n            }\n          }]] \n        : [['list'], ['html'], ['allure-playwright', { \n            outputFolder: 'allure-results',\n            suiteTitle: false,\n            attachments: {\n                screenshot: 'always',\n                video: 'retain-on-failure',\n                trace: 'retain-on-failure'\n            }\n          }]],\n    \n    outputDir: 'test-results',\n    fullyParallel: false,\n    \n    use: {\n        headless: true,\n        viewport: { width: 1280, height: 720 },\n        ignoreHTTPSErrors: true,\n        \n        // Enhanced screenshot configuration\n        screenshot: {\n            mode: 'only-on-failure',\n            fullPage: true\n        },\n        \n        video: process.env.CI ? 'retain-on-failure' : 'off',\n        trace: process.env.CI ? 'retain-on-failure' : 'off',\n        \n        actionTimeout: process.env.CI ? 30000 : 0,\n        navigationTimeout: process.env.CI ? 60000 : 30000,\n    },\n    \n    workers: process.env.CI ? 1 : 3,\n    \n    projects: [\n        { \n            name: 'chromium', \n            use: { \n                ...devices['Desktop Chrome'],\n                // Custom screenshot path for better organization\n                contextOptions: {\n                    recordVideo: process.env.CI || process.env.RECORD_VIDEO ? {\n                        dir: path.join('test-results', 'videos', 'chromium'),\n                        size: { width: 1280, height: 720 }\n                    } : undefined\n                }\n            } \n        },\n        { \n            name: 'firefox', \n            use: { \n                ...devices['Desktop Firefox'],\n                contextOptions: {\n                    recordVideo: process.env.CI || process.env.RECORD_VIDEO ? {\n                        dir: path.join('test-results', 'videos', 'firefox'),\n                        size: { width: 1280, height: 720 }\n                    } : undefined\n                }\n            } \n        },\n        { \n            name: 'webkit', \n            use: { \n                ...devices['Desktop Safari'],\n                contextOptions: {\n                    recordVideo: process.env.CI || process.env.RECORD_VIDEO ? {\n                        dir: path.join('test-results', 'videos', 'webkit'),\n                        size: { width: 1280, height: 720 }\n                    } : undefined\n                }\n            } \n        },\n    ],\n\n    // Global setup and teardown\n    globalSetup: require.resolve('./src/utils/global-setup.ts'),\n    globalTeardown: require.resolve('./src/utils/global-teardown.ts'),\n});